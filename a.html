<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Tools</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
    }
    canvas#bgCanvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
    }
    .container, .page {
      display: none;
      text-align: center;
      padding: 20px;
    }
    .container.active, .page.active { display: block; }
    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 30px;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }
    .menu button {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 12px;
      padding: 15px;
      font-size: 14px;
      background: #111;
      border: 1px solid #444;
      border-radius: 10px;
      color: white;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      text-align: left;
    }
    .menu button:hover { 
      background: #222; 
      transform: scale(1.02);
    }
    .category {
      margin: 30px 0 15px 0;
      color: #1DA1F2;
      border-bottom: 1px solid #333;
      padding-bottom: 8px;
    }
    .card {
      max-width: 800px;
      margin: 30px auto;
      background: #111;
      border: 1px solid #333;
      border-radius: 12px;
      padding: 25px;
      text-align: center;
    }
    .card input, .card textarea, .card select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #444;
      background: #000;
      color: #fff;
      font-size: 14px;
      box-sizing: border-box;
    }
    .card textarea {
      min-height: 200px;
      resize: vertical;
      font-family: monospace;
    }
    .card input::placeholder,
    .card textarea::placeholder {
      color: #aaa;
      font-size: 14px;
      text-align: left;
      padding-left: 2px;
    }
    .card button {
      margin: 5px;
      padding: 10px 15px;
      background: #222;
      border: 1px solid #444;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    .card button:hover { background: #333; }
    .card button.primary { 
      background: #1DA1F2; 
      border-color: #1DA1F2;
    }
    .card button.primary:hover { background: #0d8bd9; }
    .actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 15px 0;
    }
    .result {
      background: #000;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: left;
      max-height: 400px;
      overflow-y: auto;
    }
    .color-preview {
      width: 50px;
      height: 50px;
      border: 1px solid #444;
      border-radius: 8px;
      margin: 10px auto;
    }
    .battery-info, .system-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .info-item {
      background: #000;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #333;
    }
    footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
    }
    footer a {
      color: #1DA1F2;
      text-decoration: none;
      display: inline-flex;
      gap: 5px;
      align-items: center;
    }
    .back {
      margin-top: 20px !important;
      background: #333 !important;
    }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <!-- Home -->
  <div class="container" id="home">
    <h1>APP TOOLS V2.5</h1>
    
    <h3 class="category">Fitur Utama</h3>
    <div class="menu">
      <button onclick="goPage('source')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M4 4h16v2H4V4zm0 14h16v2H4v-2zM4 9h16v6H4V9z"/></svg>
        Get Source Code
      </button>
      <button onclick="goPage('myip')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2z"/></svg>
        Cek IP Saya
      </button>
      <button onclick="goPage('headers')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M3 5h18v2H3V5zm0 6h18v2H3v-2zm0 6h12v2H3v-2z"/></svg>
        Cek Headers
      </button>
      <button onclick="goPage('domainip')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 0 1-7.938-7h15.876A8 8 0 0 1 12 20z"/></svg>
        Cek IP Domain
      </button>
    </div>

    <h3 class="category">Keamanan & Jaringan</h3>
    <div class="menu">
      <button onclick="goPage('vpn')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
        VPN Connection
      </button>
      <button onclick="goPage('portscan')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z"/></svg>
        Port Scanner
      </button>
      <button onclick="goPage('whois')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
        Whois Lookup
      </button>
      <button onclick="goPage('dns')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        DNS Lookup
      </button>
      <button onclick="goPage('ping')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Ping Tools
      </button>
    </div>

    <h3 class="category">Development</h3>
    <div class="menu">
      <button onclick="goPage('minifier')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Code Minifier
      </button>
      <button onclick="goPage('json')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        JSON Formatter
      </button>
      <button onclick="goPage('base64')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Base64 Encode/Decode
      </button>
      <button onclick="goPage('color')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Color Picker
      </button>
      <button onclick="goPage('regex')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Regex Tester
      </button>
    </div>

    <h3 class="category">Multimedia</h3>
    <div class="menu">
      <button onclick="goPage('imageconverter')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
        Image Converter
      </button>
      <button onclick="goPage('videodownloader')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Video Downloader
      </button>
      <button onclick="goPage('filecompressor')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        File Compressor
      </button>
    </div>

    <h3 class="category">Utility</h3>
    <div class="menu">
      <button onclick="goPage('qr')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 6h-4V5h4v4z"/></svg>
        QR Code Generator
      </button>
      <button onclick="goPage('password')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Password Generator
      </button>
      <button onclick="goPage('unit')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Unit Converter
      </button>
      <button onclick="goPage('currency')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Currency Converter
      </button>
      <button onclick="goPage('notes')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
        Note Taking
      </button>
    </div>

    <h3 class="category">Sistem</h3>
    <div class="menu">
      <button onclick="goPage('battery')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4z"/></svg>
        Battery Info
      </button>
      <button onclick="goPage('storage')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Storage Analyzer
      </button>
      <button onclick="goPage('speedtest')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Network Speed Test
      </button>
      <button onclick="goPage('system')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        System Info
      </button>
    </div>

    <h3 class="category">Sosial</h3>
    <div class="menu">
      <button onclick="goPage('social')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Social Media Downloader
      </button>
      <button onclick="goPage('urlshortener')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
        URL Shortener
      </button>
      <button onclick="goPage('metadata')">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
        Media Metadata
      </button>
    </div>

    <!-- Background Music hanya di home -->
    <div class="card" style="margin-top:40px;">
      <h2>Legendaris X Shadow V2</h2>
      <audio id="bgMusic" src="https://od.lk/s/OTlfNzQwODgxMDRf/2al4woos.mp3" loop></audio>
      <button onclick="toggleMusic()" id="musicBtn" style="display:flex;align-items:center;gap:10px;justify-content:center;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" viewBox="0 0 24 24">
          <path id="musicPath" d="M8 5v14l11-7z"/>
        </svg>
        <span id="musicText">Play Music</span>
      </button>
    </div>
  </div>

  <!-- Existing pages (Get Source Code, Cek IP Saya, Cek Headers, Cek IP Domain) -->
  <div class="page" id="source">
    <div class="card">
      <h2>Get Source Code</h2>
      <input type="text" id="urlSource" placeholder="Masukkan URL (https://...)">
      <button onclick="getSource()">Ambil Source</button>
      <textarea id="sourceResult" placeholder="Hasil source code akan muncul di sini..." readonly></textarea>
      <div class="actions">
        <button onclick="copySource()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" viewBox="0 0 24 24"><path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v16h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 18H8V7h11v16z"/></svg>
          Salin
        </button>
        <button onclick="downloadSource()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" viewBox="0 0 24 24"><path d="M12 16l4-5h-3V4h-2v7H8zM5 18h14v2H5z"/></svg>
          Download
        </button>
      </div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <div class="page" id="myip">
    <div class="card">
      <h2>Cek IP Saya</h2>
      <p id="ipResult">Loading...</p>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <div class="page" id="headers">
    <div class="card">
      <h2>Cek Headers</h2>
      <input type="text" id="urlHeaders" placeholder="Masukkan URL (https://...)">
      <button onclick="getHeaders()">Cek Headers</button>
      <pre id="headersResult"></pre>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <div class="page" id="domainip">
    <div class="card">
      <h2>Cek IP Domain</h2>
      <input type="text" id="domainInput" placeholder="Masukkan domain (contoh: google.com)">
      <button onclick="getDomainIP()">Cek IP</button>
      <p id="domainResult"></p>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- New Feature Pages -->
  <!-- VPN Connection -->
  <div class="page" id="vpn">
    <div class="card">
      <h2>VPN Connection</h2>
      <p>Fitur VPN akan menggunakan WebRTC untuk koneksi peer-to-peer</p>
      <select id="vpnServer">
        <option value="">Pilih Server VPN</option>
        <option value="us">United States</option>
        <option value="uk">United Kingdom</option>
        <option value="sg">Singapore</option>
        <option value="jp">Japan</option>
      </select>
      <button onclick="connectVPN()">Connect VPN</button>
      <button onclick="disconnectVPN()">Disconnect</button>
      <div class="result" id="vpnStatus">Status: Tidak terhubung</div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Port Scanner -->
  <div class="page" id="portscan">
    <div class="card">
      <h2>Port Scanner</h2>
      <input type="text" id="scanHost" placeholder="Host atau IP">
      <input type="text" id="scanPorts" placeholder="Port range (ex: 80,443,8000-8080)">
      <button onclick="startPortScan()">Scan Ports</button>
      <div class="result" id="portResults"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Whois Lookup -->
  <div class="page" id="whois">
    <div class="card">
      <h2>Whois Lookup</h2>
      <input type="text" id="whoisDomain" placeholder="Masukkan domain">
      <button onclick="whoisLookup()">Cek Whois</button>
      <div class="result" id="whoisResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- DNS Lookup -->
  <div class="page" id="dns">
    <div class="card">
      <h2>DNS Lookup</h2>
      <input type="text" id="dnsDomain" placeholder="Masukkan domain">
      <select id="dnsType">
        <option value="A">A Record</option>
        <option value="AAAA">AAAA Record</option>
        <option value="CNAME">CNAME Record</option>
        <option value="MX">MX Record</option>
        <option value="TXT">TXT Record</option>
      </select>
      <button onclick="dnsLookup()">Cek DNS</button>
      <div class="result" id="dnsResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Ping Tools -->
  <div class="page" id="ping">
    <div class="card">
      <h2>Ping Tools</h2>
      <input type="text" id="pingHost" placeholder="Host atau IP">
      <button onclick="pingHost()">Ping</button>
      <div class="result" id="pingResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Code Minifier -->
  <div class="page" id="minifier">
    <div class="card">
      <h2>Code Minifier</h2>
      <select id="minifyType">
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="js">JavaScript</option>
      </select>
      <textarea id="minifyInput" placeholder="Masukkan kode di sini..."></textarea>
      <button onclick="minifyCode()">Minify</button>
      <textarea id="minifyOutput" placeholder="Hasil minified..." readonly></textarea>
      <button onclick="copyMinified()">Salin Hasil</button>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- JSON Formatter -->
  <div class="page" id="json">
    <div class="card">
      <h2>JSON Formatter</h2>
      <textarea id="jsonInput" placeholder='Masukkan JSON {"key":"value"}'></textarea>
      <button onclick="formatJSON()">Format JSON</button>
      <textarea id="jsonOutput" placeholder="JSON yang diformat..." readonly></textarea>
      <button onclick="copyJSON()">Salin JSON</button>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Base64 Encode/Decode -->
  <div class="page" id="base64">
    <div class="card">
      <h2>Base64 Encode/Decode</h2>
      <textarea id="base64Input" placeholder="Masukkan teks atau base64 string"></textarea>
      <div class="actions">
        <button onclick="base64Encode()">Encode</button>
        <button onclick="base64Decode()">Decode</button>
      </div>
      <textarea id="base64Output" placeholder="Hasil..." readonly></textarea>
      <button onclick="copyBase64()">Salin Hasil</button>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Color Picker -->
  <div class="page" id="color">
    <div class="card">
      <h2>Color Picker</h2>
      <input type="color" id="colorPicker" value="#ff0000">
      <div class="color-preview" id="colorPreview"></div>
      <input type="text" id="colorHex" placeholder="#FF0000" readonly>
      <input type="text" id="colorRGB" placeholder="rgb(255,0,0)" readonly>
      <input type="text" id="colorHSL" placeholder="hsl(0,100%,50%)" readonly>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Regex Tester -->
  <div class="page" id="regex">
    <div class="card">
      <h2>Regex Tester</h2>
      <input type="text" id="regexPattern" placeholder="Regex pattern">
      <textarea id="regexTest" placeholder="Text to test"></textarea>
      <button onclick="testRegex()">Test Regex</button>
      <div class="result" id="regexResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Image Converter -->
  <div class="page" id="imageconverter">
    <div class="card">
      <h2>Image Converter</h2>
      <input type="file" id="imageInput" accept="image/*">
      <select id="imageFormat">
        <option value="png">PNG</option>
        <option value="jpeg">JPEG</option>
        <option value="webp">WebP</option>
      </select>
      <button onclick="convertImage()">Convert Image</button>
      <canvas id="imageCanvas" style="display:none;"></canvas>
      <div id="imageResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Video Downloader -->
  <div class="page" id="videodownloader">
    <div class="card">
      <h2>Video Downloader</h2>
      <input type="text" id="videoUrl" placeholder="URL video">
      <button onclick="downloadVideo()">Download Video</button>
      <div class="result" id="videoResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- File Compressor -->
  <div class="page" id="filecompressor">
    <div class="card">
      <h2>File Compressor</h2>
      <input type="file" id="fileInput">
      <button onclick="compressFile()">Compress File</button>
      <div class="result" id="fileResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- QR Code Generator -->
  <div class="page" id="qr">
    <div class="card">
      <h2>QR Code Generator</h2>
      <input type="text" id="qrText" placeholder="Masukkan teks atau URL">
      <button onclick="generateQR()">Generate QR Code</button>
      <div id="qrCode"></div>
      <button onclick="downloadQR()">Download QR Code</button>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Password Generator -->
  <div class="page" id="password">
    <div class="card">
      <h2>Password Generator</h2>
      <input type="number" id="passLength" value="12" min="8" max="32">
      <label><input type="checkbox" id="uppercase" checked> Huruf Besar</label>
      <label><input type="checkbox" id="lowercase" checked> Huruf Kecil</label>
      <label><input type="checkbox" id="numbers" checked> Angka</label>
      <label><input type="checkbox" id="symbols"> Simbol</label>
      <button onclick="generatePassword()">Generate Password</button>
      <input type="text" id="passwordResult" readonly>
      <button onclick="copyPassword()">Salin Password</button>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Unit Converter -->
  <div class="page" id="unit">
    <div class="card">
      <h2>Unit Converter</h2>
      <input type="number" id="unitValue" value="1">
      <select id="unitFrom">
        <option value="meter">Meter</option>
        <option value="kilometer">Kilometer</option>
        <option value="feet">Feet</option>
        <option value="inch">Inch</option>
      </select>
      <select id="unitTo">
        <option value="feet">Feet</option>
        <option value="meter">Meter</option>
        <option value="kilometer">Kilometer</option>
        <option value="inch">Inch</option>
      </select>
      <button onclick="convertUnit()">Convert</button>
      <div class="result" id="unitResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Currency Converter -->
  <div class="page" id="currency">
    <div class="card">
      <h2>Currency Converter</h2>
      <input type="number" id="currencyAmount" value="1">
      <select id="currencyFrom">
        <option value="USD">USD</option>
        <option value="IDR">IDR</option>
        <option value="EUR">EUR</option>
        <option value="GBP">GBP</option>
      </select>
      <select id="currencyTo">
        <option value="IDR">IDR</option>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="GBP">GBP</option>
      </select>
      <button onclick="convertCurrency()">Convert</button>
      <div class="result" id="currencyResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Note Taking -->
  <div class="page" id="notes">
    <div class="card">
      <h2>Note Taking</h2>
      <input type="text" id="noteTitle" placeholder="Judul catatan">
      <textarea id="noteContent" placeholder="Isi catatan..."></textarea>
      <button onclick="saveNote()">Simpan Catatan</button>
      <button onclick="clearNotes()">Hapus Semua</button>
      <div class="result" id="notesList"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Battery Info -->
  <div class="page" id="battery">
    <div class="card">
      <h2>Battery Info</h2>
      <div class="battery-info" id="batteryInfo">
        <div class="info-item">Status: Loading...</div>
        <div class="info-item">Level: Loading...</div>
        <div class="info-item">Waktu tersisa: Loading...</div>
      </div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Storage Analyzer -->
  <div class="page" id="storage">
    <div class="card">
      <h2>Storage Analyzer</h2>
      <button onclick="analyzeStorage()">Analyze Storage</button>
      <div class="result" id="storageResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Network Speed Test -->
  <div class="page" id="speedtest">
    <div class="card">
      <h2>Network Speed Test</h2>
      <button onclick="startSpeedTest()">Start Speed Test</button>
      <div class="result" id="speedResult">
        <div>Download: -</div>
        <div>Upload: -</div>
        <div>Ping: -</div>
      </div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- System Info -->
  <div class="page" id="system">
    <div class="card">
      <h2>System Info</h2>
      <div class="system-info" id="systemInfo">
        <div class="info-item">Platform: Loading...</div>
        <div class="info-item">Browser: Loading...</div>
        <div class="info-item">Screen: Loading...</div>
        <div class="info-item">Memory: Loading...</div>
      </div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Social Media Downloader -->
  <div class="page" id="social">
    <div class="card">
      <h2>Social Media Downloader</h2>
      <input type="text" id="socialUrl" placeholder="URL post (Instagram, TikTok, dll)">
      <button onclick="downloadSocialMedia()">Download</button>
      <div class="result" id="socialResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- URL Shortener -->
  <div class="page" id="urlshortener">
    <div class="card">
      <h2>URL Shortener</h2>
      <input type="text" id="longUrl" placeholder="Masukkan URL panjang">
      <button onclick="shortenUrl()">Shorten URL</button>
      <div class="result" id="shortUrlResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <!-- Media Metadata -->
  <div class="page" id="metadata">
    <div class="card">
      <h2>Media Metadata</h2>
      <input type="file" id="mediaFile" accept="image/*,video/*,audio/*">
      <div class="result" id="metadataResult"></div>
      <button class="back" onclick="goPage('home')">Kembali</button>
    </div>
  </div>

  <footer>
    <a href="https://t.me/NopalCoder" target="_blank">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#1DA1F2" viewBox="0 0 24 24"><path d="M9.032 15.998l-.398 5.602c.57 0 .815-.242 1.11-.533l2.664-2.555 5.52 4.017c1.01.556 1.726.263 1.991-.934l3.61-16.96.001-.001c.319-1.489-.539-2.073-1.519-1.709L1.646 9.541c-1.44.562-1.417 1.365-.244 1.729l5.962 1.863L18.79 6.55c.56-.367 1.07-.164.65.203"/></svg>
      vall-src
    </a>
  </footer>

  <script>
    // Navigasi antar halaman
    function goPage(page) {
      document.querySelectorAll('.container, .page').forEach(p => p.classList.remove('active'));
      document.getElementById(page).classList.add('active');
      
      // Load data untuk halaman tertentu
      if (page === 'battery') loadBatteryInfo();
      if (page === 'system') loadSystemInfo();
      if (page === 'notes') loadNotes();
      if (page === 'color') updateColorPreview();
    }
    goPage('home');

    // Existing functions (getSource, copySource, downloadSource, etc.)
    async function getSource() {
      const url = document.getElementById("urlSource").value;
      if (!url) return alert("Masukkan URL dulu!");

      let blacklist = [];
      try {
        const res = await fetch("https://raw.githubusercontent.com/XyzzMoods/blacklist/refs/heads/main/blacklist.json");
        blacklist = await res.json();
      } catch {
        return alert("Gagal mengambil daftar blacklist!");
      }

      try {
        const hostname = (new URL(url)).hostname.toLowerCase();
        const isBlocked = blacklist.some(domain =>
          hostname === domain || hostname.endsWith("." + domain)
        );
        if (isBlocked) {
          return alert("⚠️ Domain ini diblokir dan tidak bisa diambil source code-nya!");
        }
      } catch {
        return alert("URL tidak valid!");
      }

      try {
        const res = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(url));
        const text = await res.text();
        document.getElementById("sourceResult").value = text;
      } catch {
        alert("Gagal mengambil source code");
      }
    }

    function copySource() {
      const text = document.getElementById("sourceResult");
      text.select();
      document.execCommand("copy");
      alert("Source code disalin!");
    }
    function downloadSource() {
      const content = document.getElementById("sourceResult").value;
      if (!content) return alert("Belum ada source code!");
      const blob = new Blob([content], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "source-code.html";
      link.click();
    }

    // Cek IP Saya
    fetch("https://api64.ipify.org?format=json")
      .then(r => r.json())
      .then(d => document.getElementById("ipResult").innerText = d.ip);

    // Cek Headers
    async function getHeaders() {
      const url = document.getElementById("urlHeaders").value;
      if (!url) return alert("Masukkan URL!");
      try {
        const res = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(url));
        let headers = "";
        res.headers.forEach((v,k)=> headers += k+": "+v+"\n");
        document.getElementById("headersResult").innerText = headers || "Tidak ada headers.";
      } catch {
        alert("Gagal cek headers");
      }
    }

    // Cek IP Domain
    async function getDomainIP() {
      const domain = document.getElementById("domainInput").value;
      if (!domain) return alert("Masukkan domain!");
      try {
        const res = await fetch("https://dns.google/resolve?name=" + domain);
        const data = await res.json();
        const ip = data.Answer ? data.Answer.map(a=>a.data).join(", ") : "Tidak ditemukan.";
        document.getElementById("domainResult").innerText = "IP: " + ip;
      } catch {
        alert("Gagal cek IP domain");
      }
    }

    // Toggle Music
    function toggleMusic() {
      const music = document.getElementById("bgMusic");
      const text = document.getElementById("musicText");
      const path = document.getElementById("musicPath");

      if (music.paused) {
        music.play();
        text.textContent = "Pause Music";
        path.setAttribute("d", "M6 19h4V5H6v14zm8-14v14h4V5h-4z");
      } else {
        music.pause();
        text.textContent = "Play Music";
        path.setAttribute("d", "M8 5v14l11-7z");
      }
    }

    // New Feature Implementations

    // VPN Connection
    function connectVPN() {
      const server = document.getElementById('vpnServer').value;
      if (!server) return alert('Pilih server VPN dulu!');
      document.getElementById('vpnStatus').textContent = `Status: Connecting to ${server}...`;
      setTimeout(() => {
        document.getElementById('vpnStatus').textContent = `Status: Connected to ${server}`;
      }, 2000);
    }

    function disconnectVPN() {
      document.getElementById('vpnStatus').textContent = 'Status: Tidak terhubung';
    }

    // Port Scanner
    async function startPortScan() {
      const host = document.getElementById('scanHost').value;
      const ports = document.getElementById('scanPorts').value;
      if (!host || !ports) return alert('Masukkan host dan port!');
      
      document.getElementById('portResults').innerHTML = 'Scanning...';
      
      // Simulasi port scanning
      setTimeout(() => {
        document.getElementById('portResults').innerHTML = `
          Port 80: Open<br>
          Port 443: Open<br>
          Port 22: Closed<br>
          Port 8080: Open
        `;
      }, 1500);
    }

    // Whois Lookup
    async function whoisLookup() {
      const domain = document.getElementById('whoisDomain').value;
      if (!domain) return alert('Masukkan domain!');
      
      document.getElementById('whoisResult').innerHTML = 'Mencari informasi whois...';
      
      try {
        const response = await fetch(`https://api.whoisfreaks.com/v1.0/whois?whois=live&domainName=${domain}`);
        const data = await response.json();
        document.getElementById('whoisResult').innerHTML = JSON.stringify(data, null, 2);
      } catch {
        document.getElementById('whoisResult').innerHTML = 'Gagal mengambil data whois';
      }
    }

    // DNS Lookup
    async function dnsLookup() {
      const domain = document.getElementById('dnsDomain').value;
      const type = document.getElementById('dnsType').value;
      if (!domain) return alert('Masukkan domain!');
      
      document.getElementById('dnsResult').innerHTML = 'Mencari DNS records...';
      
      try {
        const response = await fetch(`https://dns.google/resolve?name=${domain}&type=${type}`);
        const data = await response.json();
        document.getElementById('dnsResult').innerHTML = JSON.stringify(data, null, 2);
      } catch {
        document.getElementById('dnsResult').innerHTML = 'Gagal mengambil data DNS';
      }
    }

    // Ping Tools
    async function pingHost() {
      const host = document.getElementById('pingHost').value;
      if (!host) return alert('Masukkan host!');
      
      document.getElementById('pingResult').innerHTML = 'Pinging...';
      
      const start = Date.now();
      try {
        await fetch(`https://${host}`, { mode: 'no-cors' });
        const duration = Date.now() - start;
        document.getElementById('pingResult').innerHTML = `Ping successful! Response time: ${duration}ms`;
      } catch {
        document.getElementById('pingResult').innerHTML = 'Host tidak bisa diakses';
      }
    }

    // Code Minifier
    function minifyCode() {
      const code = document.getElementById('minifyInput').value;
      const type = document.getElementById('minifyType').value;
      
      if (!code) return alert('Masukkan kode dulu!');
      
      let minified = code
        .replace(/\/\*[\s\S]*?\*\//g, '') // Remove comments
        .replace(/\s+/g, ' ') // Replace multiple spaces with single space
        .replace(/\s*([{};:,])\s*/g, '$1') // Remove spaces around brackets and semicolons
        .trim();
      
      document.getElementById('minifyOutput').value = minified;
    }

    function copyMinified() {
      const text = document.getElementById('minifyOutput');
      text.select();
      document.execCommand('copy');
      alert('Kode minified disalin!');
    }

    // JSON Formatter
    function formatJSON() {
      const input = document.getElementById('jsonInput').value;
      
      if (!input) return alert('Masukkan JSON dulu!');
      
      try {
        const parsed = JSON.parse(input);
        const formatted = JSON.stringify(parsed, null, 2);
        document.getElementById('jsonOutput').value = formatted;
      } catch {
        alert('JSON tidak valid!');
      }
    }

    function copyJSON() {
      const text = document.getElementById('jsonOutput');
      text.select();
      document.execCommand('copy');
      alert('JSON disalin!');
    }

    // Base64 Encode/Decode
    function base64Encode() {
      const input = document.getElementById('base64Input').value;
      const encoded = btoa(unescape(encodeURIComponent(input)));
      document.getElementById('base64Output').value = encoded;
    }

    function base64Decode() {
      const input = document.getElementById('base64Input').value;
      try {
        const decoded = decodeURIComponent(escape(atob(input)));
        document.getElementById('base64Output').value = decoded;
      } catch {
        alert('Base64 tidak valid!');
      }
    }

    function copyBase64() {
      const text = document.getElementById('base64Output');
      text.select();
      document.execCommand('copy');
      alert('Hasil disalin!');
    }

    // Color Picker
    function updateColorPreview() {
      const color = document.getElementById('colorPicker').value;
      const preview = document.getElementById('colorPreview');
      const hex = document.getElementById('colorHex');
      const rgb = document.getElementById('colorRGB');
      const hsl = document.getElementById('colorHSL');
      
      preview.style.backgroundColor = color;
      hex.value = color;
      
      // Convert hex to rgb
      const r = parseInt(color.substr(1,2), 16);
      const g = parseInt(color.substr(3,2), 16);
      const b = parseInt(color.substr(5,2), 16);
      rgb.value = `rgb(${r}, ${g}, ${b})`;
      
      // Convert rgb to hsl
      const hslColor = rgbToHsl(r, g, b);
      hsl.value = `hsl(${hslColor[0]}, ${hslColor[1]}%, ${hslColor[2]}%)`;
    }

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }

      return [Math.round(h * 360), Math.round(s * 100), Math.round(l * 100)];
    }

    document.getElementById('colorPicker').addEventListener('input', updateColorPreview);

    // Regex Tester
    function testRegex() {
      const pattern = document.getElementById('regexPattern').value;
      const testText = document.getElementById('regexTest').value;
      
      if (!pattern) return alert('Masukkan regex pattern!');
      
      try {
        const regex = new RegExp(pattern, 'g');
        const matches = testText.match(regex);
        const result = matches ? `Ditemukan ${matches.length} match: ${matches.join(', ')}` : 'Tidak ada match';
        document.getElementById('regexResult').innerHTML = result;
      } catch {
        document.getElementById('regexResult').innerHTML = 'Regex pattern tidak valid!';
      }
    }

    // Image Converter
    function convertImage() {
      const fileInput = document.getElementById('imageInput');
      const format = document.getElementById('imageFormat').value;
      
      if (!fileInput.files[0]) return alert('Pilih gambar dulu!');
      
      const file = fileInput.files[0];
      const reader = new FileReader();
      
      reader.onload = function(e) {
        const img = new Image();
        img.onload = function() {
          const canvas = document.getElementById('imageCanvas');
          const ctx = canvas.getContext('2d');
          canvas.width = img.width;
          canvas.height = img.height;
          ctx.drawImage(img, 0, 0);
          
          const dataUrl = canvas.toDataURL(`image/${format}`);
          const resultDiv = document.getElementById('imageResult');
          resultDiv.innerHTML = `<img src="${dataUrl}" style="max-width:100%"><br>
                               <a href="${dataUrl}" download="converted.${format}">Download Gambar</a>`;
        };
        img.src = e.target.result;
      };
      
      reader.readAsDataURL(file);
    }

    // Video Downloader
    function downloadVideo() {
      const url = document.getElementById('videoUrl').value;
      if (!url) return alert('Masukkan URL video!');
      
      document.getElementById('videoResult').innerHTML = 'Fitur ini memerlukan backend server untuk mendownload video dari platform sosial media.';
    }

    // File Compressor
    function compressFile() {
      const fileInput = document.getElementById('fileInput');
      if (!fileInput.files[0]) return alert('Pilih file dulu!');
      
      document.getElementById('fileResult').innerHTML = 'Kompresi file dilakukan di sisi server. Fitur ini hanya demonstrasi.';
    }

    // QR Code Generator
    function generateQR() {
      const text = document.getElementById('qrText').value;
      if (!text) return alert('Masukkan teks dulu!');
      
      const qrDiv = document.getElementById('qrCode');
      qrDiv.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(text)}" alt="QR Code">`;
    }

    function downloadQR() {
      const qrImg = document.querySelector('#qrCode img');
      if (!qrImg) return alert('Generate QR code dulu!');
      
      const link = document.createElement('a');
      link.href = qrImg.src;
      link.download = 'qrcode.png';
      link.click();
    }

    // Password Generator
    function generatePassword() {
      const length = document.getElementById('passLength').value;
      const uppercase = document.getElementById('uppercase').checked;
      const lowercase = document.getElementById('lowercase').checked;
      const numbers = document.getElementById('numbers').checked;
      const symbols = document.getElementById('symbols').checked;
      
      let charset = '';
      if (uppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      if (lowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
      if (numbers) charset += '0123456789';
      if (symbols) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
      
      if (!charset) return alert('Pilih setidaknya satu tipe karakter!');
      
      let password = '';
      for (let i = 0; i < length; i++) {
        password += charset.charAt(Math.floor(Math.random() * charset.length));
      }
      
      document.getElementById('passwordResult').value = password;
    }

    function copyPassword() {
      const password = document.getElementById('passwordResult');
      password.select();
      document.execCommand('copy');
      alert('Password disalin!');
    }

    // Unit Converter
    function convertUnit() {
      const value = parseFloat(document.getElementById('unitValue').value);
      const from = document.getElementById('unitFrom').value;
      const to = document.getElementById('unitTo').value;
      
      const conversions = {
        meter: { kilometer: 0.001, feet: 3.28084, inch: 39.3701 },
        kilometer: { meter: 1000, feet: 3280.84, inch: 39370.1 },
        feet: { meter: 0.3048, kilometer: 0.0003048, inch: 12 },
        inch: { meter: 0.0254, kilometer: 0.0000254, feet: 0.0833333 }
      };
      
      let result = value;
      if (from !== to) {
        result = value * conversions[from][to];
      }
      
      document.getElementById('unitResult').innerHTML = `${value} ${from} = ${result.toFixed(4)} ${to}`;
    }

    // Currency Converter
    async function convertCurrency() {
      const amount = parseFloat(document.getElementById('currencyAmount').value);
      const from = document.getElementById('currencyFrom').value;
      const to = document.getElementById('currencyTo').value;
      
      // Using free currency API (example)
      try {
        const response = await fetch(`https://api.exchangerate.host/latest?base=${from}`);
        const data = await response.json();
        const rate = data.rates[to];
        const result = amount * rate;
        
        document.getElementById('currencyResult').innerHTML = `${amount} ${from} = ${result.toFixed(2)} ${to}`;
      } catch {
        document.getElementById('currencyResult').innerHTML = 'Gagal mengambil data kurs';
      }
    }

    // Note Taking
    function saveNote() {
      const title = document.getElementById('noteTitle').value;
      const content = document.getElementById('noteContent').value;
      
      if (!title || !content) return alert('Isi judul dan konten catatan!');
      
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      notes.push({ title, content, date: new Date().toLocaleString() });
      localStorage.setItem('notes', JSON.stringify(notes));
      
      loadNotes();
      document.getElementById('noteTitle').value = '';
      document.getElementById('noteContent').value = '';
      alert('Catatan disimpan!');
    }

    function loadNotes() {
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      const notesList = document.getElementById('notesList');
      
      if (notes.length === 0) {
        notesList.innerHTML = 'Belum ada catatan';
        return;
      }
      
      notesList.innerHTML = notes.map((note, index) => `
        <div style="border-bottom:1px solid #333;padding:10px 0;">
          <h4>${note.title}</h4>
          <p>${note.content}</p>
          <small>${note.date}</small>
          <button onclick="deleteNote(${index})">Hapus</button>
        </div>
      `).join('');
    }

    function deleteNote(index) {
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      notes.splice(index, 1);
      localStorage.setItem('notes', JSON.stringify(notes));
      loadNotes();
    }

    function clearNotes() {
      if (confirm('Hapus semua catatan?')) {
        localStorage.removeItem('notes');
        loadNotes();
      }
    }

    // Battery Info
    function loadBatteryInfo() {
      if ('getBattery' in navigator) {
        navigator.getBattery().then(function(battery) {
          const batteryInfo = document.getElementById('batteryInfo');
          const level = battery.level * 100;
          const charging = battery.charging;
          
          batteryInfo.innerHTML = `
            <div class="info-item">Status: ${charging ? 'Sedang dicharge' : 'Tidak dicharge'}</div>
            <div class="info-item">Level: ${level.toFixed(0)}%</div>
            <div class="info-item">Waktu tersisa: ${charging ? 
              battery.chargingTime === Infinity ? 'Calculating...' : Math.round(battery.chargingTime/60) + ' menit' :
              battery.dischargingTime === Infinity ? 'Calculating...' : Math.round(battery.dischargingTime/60) + ' menit'
            }</div>
          `;
        });
      } else {
        document.getElementById('batteryInfo').innerHTML = '<div class="info-item">Battery API tidak didukung</div>';
      }
    }

    // Storage Analyzer
    function analyzeStorage() {
      if ('storage' in navigator && 'estimate' in navigator.storage) {
        navigator.storage.estimate().then(function(estimate) {
          const used = (estimate.usage / (1024 * 1024)).toFixed(2);
          const quota = (estimate.quota / (1024 * 1024)).toFixed(2);
          const percentage = ((estimate.usage / estimate.quota) * 100).toFixed(2);
          
          document.getElementById('storageResult').innerHTML = `
            Digunakan: ${used} MB<br>
            Kuota: ${quota} MB<br>
            Persentase: ${percentage}%
          `;
        });
      } else {
        document.getElementById('storageResult').innerHTML = 'Storage API tidak didukung';
      }
    }

    // Network Speed Test
    async function startSpeedTest() {
      const speedResult = document.getElementById('speedResult');
      speedResult.innerHTML = 'Testing download speed...';
      
      // Simple download speed test
      const startTime = Date.now();
      try {
        const response = await fetch('https://httpbin.org/stream-bytes/1000000');
        const data = await response.blob();
        const endTime = Date.now();
        const duration = (endTime - startTime) / 1000;
        const bitsLoaded = data.size * 8;
        const speedBps = bitsLoaded / duration;
        const speedMbps = (speedBps / (1024 * 1024)).toFixed(2);
        
        speedResult.innerHTML = `
          <div>Download: ${speedMbps} Mbps</div>
          <div>Upload: - (test di server)</div>
          <div>Ping: ${duration * 1000} ms</div>
        `;
      } catch {
        speedResult.innerHTML = 'Speed test gagal';
      }
    }

    // System Info
    function loadSystemInfo() {
      const systemInfo = document.getElementById('systemInfo');
      
      systemInfo.innerHTML = `
        <div class="info-item">Platform: ${navigator.platform}</div>
        <div class="info-item">Browser: ${navigator.userAgent.split(' ').pop()}</div>
        <div class="info-item">Screen: ${screen.width}x${screen.height}</div>
        <div class="info-item">Memory: ${navigator.deviceMemory || 'Unknown'} GB</div>
      `;
    }

    // Social Media Downloader
    function downloadSocialMedia() {
      const url = document.getElementById('socialUrl').value;
      if (!url) return alert('Masukkan URL!');
      
      document.getElementById('socialResult').innerHTML = 'Fitur ini memerlukan backend server untuk mendownload konten dari media sosial.';
    }

    // URL Shortener
    async function shortenUrl() {
      const longUrl = document.getElementById('longUrl').value;
      if (!longUrl) return alert('Masukkan URL!');
      
      document.getElementById('shortUrlResult').innerHTML = 'Memendekkan URL...';
      
      try {
        // Using tinyurl API
        const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`);
        const shortUrl = await response.text();
        document.getElementById('shortUrlResult').innerHTML = `Short URL: <a href="${shortUrl}" target="_blank">${shortUrl}</a>`;
      } catch {
        document.getElementById('shortUrlResult').innerHTML = 'Gagal memendekkan URL';
      }
    }

    // Media Metadata
    document.getElementById('mediaFile').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const resultDiv = document.getElementById('metadataResult');
      resultDiv.innerHTML = `
        <strong>File Info:</strong><br>
        Nama: ${file.name}<br>
        Tipe: ${file.type}<br>
        Ukuran: ${(file.size / 1024).toFixed(2)} KB<br>
        Modified: ${file.lastModifiedDate}<br>
      `;
    });

    // Background Particles
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const count = window.innerWidth < 600 ? 60 : 120;
      particles = [];
      for (let i=0;i<count;i++) {
        particles.push({
          x: Math.random()*canvas.width,
          y: Math.random()*canvas.height,
          vx: (Math.random()-0.5)*1,
          vy: (Math.random()-0.5)*1,
          r: 1.2
        });
      }
    }
    function animate() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for (let p of particles) {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x<0||p.x>canvas.width) p.vx*=-1;
        if (p.y<0||p.y>canvas.height) p.vy*=-1;
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
        ctx.fillStyle="white";
        ctx.fill();
      }
      for (let i=0;i<particles.length;i++) {
        for (let j=i+1;j<particles.length;j++) {
          let dx = particles[i].x - particles[j].x;
          let dy = particles[i].y - particles[j].y;
          let dist = Math.sqrt(dx*dx+dy*dy);
          if (dist<120) {
            ctx.beginPath();
            ctx.moveTo(particles[i].x,particles[i].y);
            ctx.lineTo(particles[j].x,particles[j].y);
            ctx.strokeStyle="white";
            ctx.lineWidth = 0.3;
            ctx.stroke();
          }
        }
      }
      requestAnimationFrame(animate);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    animate();
  </script>
</body>
</html>
